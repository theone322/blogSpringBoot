<%@ page contentType="text/html;charset=UTF-8" language="java"
	import="java.util.*"%>
	<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions"%>
<%
	String path = request.getContextPath();
	String basePath = request.getScheme() + "://"
			+ request.getServerName() + ":" + request.getServerPort()
			+ path + "/";
%>

<!DOCTYPE html>
<html lang="en">
<head>
<base href="<%=basePath%>">
<title>searchArticle</title>
<link rel="stylesheet" href="static/css/bootstrap.min.css">
<link rel="stylesheet" href="search/searchArticle.css">

</head>

<body>
		<div>
		<%@include file="../headerFooter/header.jsp"%>
	</div>
	<div class="container">
		<div class="search-con">
	<div class="con-middle-article">
					<c:forEach items="${articles}" var="p" varStatus="vs">
						<div class="blog">
							<div class="blog-left">
								<a class="blog-title"
									href="articleShow?articleID=${p.articleID}">${p.articleTitle}</a>
								<div class="blog-con">
									<%-- ${fn:substring(p.articleContent,0,100)} --%>
								<%-- 	<c:choose>
										<c:when test="${fn:contains(p.articleContent, '<') }">
  ${fn:replace(fn:replace(fn:substringBefore(p.articleContent, '<'),'&nbsp;', ''), searchCondtion, keywords)}
  <c:forEach
												items="${fn:split(fn:substring(fn:replace(fn:substringAfter(p.articleContent, '<'),'&nbsp;', ''),0, 200), '<')}"
												var="artext">
 ${fn:replace(fn:substringAfter(artext, '>'), searchCondtion, keywords)}
   </c:forEach>
										</c:when>
										<c:otherwise>
   ${fn:replace(fn:substring(fn:replace(p.articleContent,'&nbsp;', ''), 0, 200), searchCondtion, keywords)}
  </c:otherwise>
									</c:choose> --%>
									<c:choose>
										<c:when test="${fn:contains(p.articleContent, '<') }">
  ${fn:replace(fn:replace(fn:substringBefore(p.articleContent, '<'),'&nbsp;', ''), searchCondtion, keywords)}
  <c:forEach
												items="${fn:split(fn:substring(fn:replace(fn:substringAfter(p.articleContent, '<'),'&nbsp;', ''),0, 200), '<')}"
												var="artext">
 ${fn:replace(fn:substringAfter(artext, '>'), searchCondtion, keywords)}
   </c:forEach>
										</c:when>
										<c:otherwise>
   ${fn:replace(fn:substring(fn:replace(p.articleContent,'&nbsp;', ''), 0, 200), searchCondtion, keywords)}
  </c:otherwise>
									</c:choose>



								</div>
								<div class="blog-bottom">
									<a class="userInfoID"
										href="userIndex?userID=${p.userInfo.userID}">${p.userInfo.userID}</a>
									<span class="blog-support">赞 ${p.supportNum}<span></span></span>
									<span class="blog-comment">评论${p.commentNum} <span></span></span>
									<span class="launch-time">${p.launchTime}</span>
								</div>
							</div>
							<div class="blog-right">
								<img src="" alt="" class="blog-photo">
							</div>
						</div>
						<hr>
					</c:forEach>

					<div class="loading-parent">
						<div class="loading">
							<div></div>
							<div></div>
							<div></div>
							<div></div>
							<div></div>
						</div>
					</div>

				</div>

			</div>
		</div>

	</div>

	<div>
			<%@include file="../headerFooter/footer.jsp"%>
		</div>


	<script src="static/js/jquery-3.3.1.min.js"></script>
	<script src="static/js/bootstrap.min.js"></script>
	<script src="search/searchArticle.js"></script>
</body>

</html>