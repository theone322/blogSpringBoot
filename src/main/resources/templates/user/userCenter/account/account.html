<jsp:useBean id="user" scope="request" type="com.blog.entity.User" />
<%@ page contentType="text/html;charset=UTF-8" language="java"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%
	String path = request.getContextPath();
	String basePath = request.getScheme() + "://"
			+ request.getServerName() + ":" + request.getServerPort()
			+ path + "/";
%>
<html>
<head>
<base href="<%=basePath%>">
<title>account</title>
<link rel="stylesheet" href="static/css/bootstrap.min.css">
<link rel="stylesheet" href="user/userCenter/userCenterCommon.css">
<link rel="stylesheet" href="user/userCenter/account/account.css">


</head>
<body>
	<div class="userCenterTop"><%@include
			file="../../../headerFooter/header.jsp"%></div>

	<div class="userCenterCon">

		<div class="userCenterConLeft">
			<%@include file="../userCenterCommon.jsp"%>
		</div>


		<div class="userCenterConRight">
			<br>
			<div id="basicInfo" class="container">
				<div>
					<a href="javscript:void(0)" data-toggle="modal"
						data-target="#changePWD">修改密码</a>
				</div>
				<div>
					<table class=" table table-striped table-hover">
						<tr>
							<td>手机号：</td>
							<td>1812412213</td>
							<td><a href="javascript:void(0)" class="change-account">修改</a></td>
						</tr>
						<tr>
							<td>Email：</td>
							<td>1241241@qq.com</td>
							<td><a href="javascript:void(0)" class="change-account">修改</a></td>
						</tr>
						<tr>
							<td>微信号：</td>
							<td>qwfaf-fsa</td>
							<td><a href="javascript:void(0)" class="change-account">修改</a></td>
						</tr>
					</table>
				</div>


			</div>

		</div>

	</div>

	<!-- 修改密码 -->
	<div class="modal fade" id="changePWD">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title">修改密码</h4>
					<button type="button" class="close" data-dismiss="modal">&times;</button>
				</div>

				<div class="modal-body">
					<div id="change_password" class="">
						<div class="input-group mb-3">
							<div class="input-group-prepend">
								<span class="input-group-text">旧密码</span>
							</div>
							<input type="text" class="form-control" placeholder=""
								id="old_password" name="old_password">
						</div>
						<div class="input-group mb-3">
							<div class="input-group-prepend">
								<span class="input-group-text">新密码</span>
							</div>
							<input type="text" class="form-control" placeholder=""
								id="new_password1" name="new_password1">
						</div>
						<div class="input-group mb-3">
							<div class="input-group-prepend">
								<span class="input-group-text">新密码</span>
							</div>
							<input type="text" class="form-control" placeholder=""
								id="new_password2" name="new_password2">
						</div>

					</div>
				</div>

				<div class="modal-footer">
				<span class="pwd-warn"style="display: none;">新密码不相同</span>
					<button type="button" class="btn btn-success submit">确认</button>
					<button type="button" class="btn btn-warning" data-dismiss="modal">关闭</button>
				</div>

			</div>
		</div>
	</div>


	<div class="userCenterBottom"><%@include
			file="../../../headerFooter/footer.jsp"%></div>


	<script src="static/js/jquery-3.3.1.min.js"></script>
	<script src="static/js/bootstrap.min.js"></script>

	<script>
		$(function() {

			$("#changePWD .submit").click(function() {
				var old=$("#old_password").val();
				var new1=$("#new_password1").val();
				var new2=$("#new_password2").val();
				
				if(new1!=new2){
					$(".pwd-warn").show();
					return false;
				}
			
				$.ajax({
					type : "post",
					url : "uAccount",
					data : {
						old:old,
				     new1:new1
						
					},
					datatype : "json",
					success : function(data) {
						console.log(data);
						if(data==1){
							$(".pwd-warn").html("");
							$(".pwd-warn").html("修改成功！");
							$(".pwd-warn").show();
							var sec = 1;
							setInterval(function(){
								 sec--;
								    if (sec<0) {
								    	window.location.reload();
								    }
							}, 500);
						}else{
							$(".pwd-warn").html("");
							$(".pwd-warn").html("修改失败！");
							$(".pwd-warn").show();
						}

					}
				});

			});
	
		});
	</script>
</body>
</html>
